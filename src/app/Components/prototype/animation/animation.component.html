<div class="main-content">
    <div *ngIf="scenario === 'interrupted-park-scenario' && park" [ngClass]="{
        'interruption-set': true,
        'no-display': hideInterruptionSet
    }">
        <button (click)="setInterruption('cyber')">Cyber Attack</button>
        <button (click)="setInterruption('obstacle')">Obstacle</button>
        <button (click)="setInterruption('sensor')">Sensor Failure</button>
    </div>
    <div [ngClass]="{
        'perpendicular-park': parkingType === 'perpendicular',
        'no-display': parkingType !== 'perpendicular'
    }">
        <div *ngIf="showObstacle"
            [ngClass]="{
                'obstacle-wrap': true,
                'obstacle-a': spot === 'A',
                'obstacle-b': spot === 'B'
            }"
            >
            <img class="obstacle" src="/assets/img/person-top-view.png">
        </div>
        <div class="vehicle-wrap parked-1">
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
        <div class="vehicle-wrap parked-2">
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
        <div [ngClass]="{
            'vehicle-wrap': true, 
            'parked-3': true, 
            'spot': showSpots && scenario !== 'no-spots-scenario', 
            'spot-a': showSpots && spot === 'A'
        }">
            <img class="vehicle" *ngIf="scenario === 'no-spots-scenario'" src="/assets/img/vehicle.png">
            <p class="spot-label" *ngIf="showSpots">A</p>
        </div>
        <div class="vehicle-wrap parked-4">
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
        <div [ngClass]="{
            'vehicle-wrap': true, 
            'parked-5': true, 
            'spot': showSpots && scenario !== 'no-spots-scenario', 
            'spot-a': showSpots && spot === 'B'
        }">
            <p class="spot-label" *ngIf="showSpots">B</p>
        </div>
        <div *ngIf="scenario !== 'no-spots-scenario'" class="vehicle-wrap parked-6">
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
        <div [@prepPerpendicularPark]="parkingType === 'perpendicular' && scenario !== 'no-spots-scenario' ? 'perpendicular-park-before-parking' : 'perpendicular-park-start'"  
            (@prepPerpendicularPark.done)="prepParkDone($event)"

            [@prepPerpendicularParkNoSpots]="parkingType === 'perpendicular' && scenario === 'no-spots-scenario' ? 'perpendicular-park-before-parking-no-spots' : 'perpendicular-park-start-no-spots'" 
            (@prepPerpendicularParkNoSpots.done)="prepParkDone($event)"

            [@completePerpendicularParkA]="(screenMaxWidth === '1200px' || screenMaxWidth === '850px' || screenMaxWidth === '650px' || screenMaxWidth === '350px') && parkingType === 'perpendicular' && spot === 'A' && park && scenario !== 'interrupted-park-scenario' ? 'perpendicular-park-final-A' : 'perpendicular-park-before-parking'"  
            (@completePerpendicularParkA.done)="parkDone($event)"

            [@completePerpendicularParkA1400]="(screenMaxWidth === '1400px' || screenMaxWidth === '1700px' || screenMaxWidth === '>1700px') && parkingType === 'perpendicular' && spot === 'A' && park && scenario !== 'interrupted-park-scenario' ? 'perpendicular-park-final-A' : 'perpendicular-park-before-parking'"
            (@completePerpendicularParkA1400.done)="parkDone($event)"

            [@interruptedPerpendicularParkAObstacle]="screenMaxWidth === '>1700px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkAObstacle1700]="screenMaxWidth === '1700px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle1700.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkAObstacle1400]="screenMaxWidth === '1400px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle1400.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkAObstacle1200]="screenMaxWidth === '1200px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle1200.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkAObstacle850]="screenMaxWidth === '850px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle850.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkAObstacle650]="screenMaxWidth === '650px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle650.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkAObstacle350]="screenMaxWidth === '350px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkAObstacle350.done)="interruptedParkDone($event)"

            [@completePerpendicularParkB]="(screenMaxWidth === '1200px' || screenMaxWidth === '850px' || screenMaxWidth === '650px' || screenMaxWidth === '350px') && parkingType === 'perpendicular' && spot === 'B' && park && scenario !== 'interrupted-park-scenario' ? 'perpendicular-park-final-B' : 'perpendicular-park-before-parking'"  
            (@completePerpendicularParkB.done)="parkDone($event)"

            [@completePerpendicularParkB1400]="(screenMaxWidth === '1400px' || screenMaxWidth === '1700px' || screenMaxWidth === '>1700px') && parkingType === 'perpendicular' && spot === 'B' && park && scenario !== 'interrupted-park-scenario' ? 'perpendicular-park-final-B' : 'perpendicular-park-before-parking'"  
            (@completePerpendicularParkB1400.done)="parkDone($event)"

            [@interruptedPerpendicularParkBObstacle]="screenMaxWidth === '>1700px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkBObstacle1700]="screenMaxWidth === '1700px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle1700.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkBObstacle1400]="screenMaxWidth === '1400px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle1400.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkBObstacle1200]="screenMaxWidth === '1200px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle1200.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkBObstacle850]="screenMaxWidth === '850px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle850.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkBObstacle650]="screenMaxWidth === '650px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle650.done)="interruptedParkDone($event)"

            [@interruptedPerpendicularParkBObstacle350]="screenMaxWidth === '350px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'perpendicular' && spot === 'B' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedPerpendicularParkBObstacle350.done)="interruptedParkDone($event)"

            [@interruptedParkNonObstacle]="interruption !== '' && interruption !== 'obstacle' && parkingType === 'perpendicular' && (spot === 'A' || spot === 'B') && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"  
            (@interruptedParkNonObstacle.done)="interruptedParkDone($event)"
            
            [@resetParkingVehicleRotation]="resetAnimation ? 'after' : 'before'"

            class="vehicle-wrap-parking"
            >
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
    </div>
    <div [ngClass]="{
        'parallel-park': parkingType === 'parallel',
        'no-display': parkingType !== 'parallel'
    }">
        <div *ngIf="showObstacle"
            [ngClass]="{
                'obstacle-wrap': true,
                'obstacle-a': spot === 'A'
            }"
            >
            <img class="obstacle" src="/assets/img/person-top-view.png">
        </div>
        <div class="vehicle-wrap parked-1">
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
        <div [ngClass]="{
            'vehicle-wrap': true, 
            'parked-2': true,
            'spot': showSpots && scenario !== 'no-spots-scenario'
        }">
            <div [ngClass]="{'spot-a': showSpots && spot === 'A', 'same-size-wrapper': true}">
                <img class="vehicle" *ngIf="scenario === 'no-spots-scenario'" src="/assets/img/vehicle.png">
                <p class="spot-label" *ngIf="showSpots">A</p>
            </div>
        </div>
        <div class="vehicle-wrap parked-3">
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
        <div [@prepParallelPark]="parkingType === 'parallel' ? 'parallel-park-before-parking' : 'parallel-park-start'"  
            (@prepParallelPark.done)="prepParkDone($event)"

            [@completeParallelPark]="parkingType === 'parallel' && spot === 'A' && park && scenario !== 'interrupted-park-scenario' ? 'parallel-park-final' : 'parallel-park-before-parking'"  
            (@completeParallelPark.done)="parkDone($event)"

            [@interruptedParkNonObstacle]="interruption !== '' && interruption !== 'obstacle' && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"  
            (@interruptedParkNonObstacle.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle]="screenMaxWidth === '>1700px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle1700]="screenMaxWidth === '1700px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle1700.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle1400]="screenMaxWidth === '1400px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle1400.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle1200]="screenMaxWidth === '1200px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle1200.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle850]="screenMaxWidth === '850px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle850.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle650]="screenMaxWidth === '650px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle650.done)="interruptedParkDone($event)"

            [@interruptedParallelParkObstacle350]="screenMaxWidth === '350px' && interruption !== '' && interruption === 'obstacle' && showObstacle && parkingType === 'parallel' && spot === 'A' && park && scenario === 'interrupted-park-scenario' ? 'park-final' : 'before-parking'"
            (@interruptedParallelParkObstacle350.done)="interruptedParkDone($event)"

            [@resetParkingVehicleRotation]="resetAnimation ? 'after' : 'before'"

            class="vehicle-wrap-parking"
            >
            <img class="vehicle" src="/assets/img/vehicle.png">
        </div>
    </div>
</div>
